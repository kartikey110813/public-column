(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{46:function(e,t,a){e.exports=a(71)},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},68:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(13),r=a.n(o),l=(a(51),a(6)),s=(a(52),a(32)),i=(a(53),a(99)),u=a(18),m=a.n(u),p=m.a.initializeApp({apiKey:"AIzaSyDCwSYT_vQjaJrxT3KojX2PYzU0QvF-pt0",authDomain:"public-column.firebaseapp.com",databaseURL:"https://public-column.firebaseio.com",projectId:"public-column",storageBucket:"public-column.appspot.com",messagingSenderId:"581608610394",appId:"1:581608610394:web:d9848a57d91942602fd663",measurementId:"G-DKQRE8LRHF"}).firestore(),d=m.a.auth(),f=m.a.storage();var g=function(e){var t,a=e.postId,o=e.user,r=e.username,u=e.imageUrl,d=e.caption,f=Object(n.useState)([]),g=Object(l.a)(f,2),b=g[0],E=g[1],h=Object(n.useState)(""),v=Object(l.a)(h,2),_=v[0],j=v[1];return Object(n.useEffect)((function(){var e;return a&&(console.log(a),e=p.collection("posts").doc(a).collection("comments").orderBy("timestamp","asc").onSnapshot((function(e){E(e.docs.map((function(e){return e.data()}))),console.log(b)}))),function(){e()}}),[a]),c.a.createElement("div",{className:"post"},c.a.createElement("div",{className:"post__header"},c.a.createElement(i.a,{className:"post__avatar",alt:r.username,src:"static/images/avatar/1.jpg"}),c.a.createElement("h3",null,r.username)),c.a.createElement("img",{className:"post__image",src:u,alt:""}),c.a.createElement("h4",{className:"post__text"}," ",c.a.createElement("strong",null,r.username)," ",d),o&&c.a.createElement("div",{className:"post__comments"},b.map((function(e){return c.a.createElement("p",null,c.a.createElement("strong",null,e.username)," ",e.text)}))),o&&c.a.createElement("form",{className:"post__commentBox"},c.a.createElement("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:_,onChange:function(e){return j(e.target.value)}}),c.a.createElement("button",(t={className:"post__button",disabled:!_},Object(s.a)(t,"disabled",!o),Object(s.a)(t,"type","submit"),Object(s.a)(t,"onClick",(function(e){e.preventDefault(),p.collection("posts").doc(a).collection("comments").add({text:_,username:o.displayName,timestamp:m.a.firestore.FieldValue.serverTimestamp()}),j("")})),t),"Post")))},b=a(95),E=a(96),h=a(97);a(68);function v(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var _=Object(b.a)((function(e){return{paper:{position:"absolute",width:800,backgroundColor:"#A3EBDF",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var j=function(e){var t=Object(n.useState)(v),a=Object(l.a)(t,1)[0],o=Object(n.useState)(!1),r=Object(l.a)(o,2),s=r[0],i=r[1],u=_(),d=Object(n.useState)(""),g=Object(l.a)(d,2),b=g[0],j=g[1],O=Object(n.useState)(0),N=Object(l.a)(O,2),C=N[0],S=N[1],y=Object(n.useState)(null),w=Object(l.a)(y,2),x=w[0],k=w[1];return c.a.createElement("div",{className:"upload"},c.a.createElement(E.a,{open:s,onClose:function(){return i(!1)}},c.a.createElement("div",{style:a,className:u.paper},c.a.createElement("div",{className:"imageupload"},c.a.createElement("progress",{className:"imageupload__progress",value:C,max:"100"}),c.a.createElement("input",{type:"text",placeholder:"Enter a Caption",onChange:function(e){return j(e.target.value)},value:b}),c.a.createElement("input",{type:"file",onChange:function(e){e.target.files[0]&&k(e.target.files[0])}}),c.a.createElement(h.a,{onClick:function(t){f.ref("images/".concat(x.name)).put(x).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);S(t)}),(function(e){console.log(e),alert(e.message)}),(function(){f.ref("images").child(x.name).getDownloadURL().then((function(t){p.collection("posts").add({timestamp:m.a.firestore.FieldValue.serverTimestamp(),caption:b,imageUrl:t,username:e}),S(0),j(""),k(null),i(!1)}))}))}},"Upload")))),c.a.createElement("div",{className:"upload__img"},c.a.createElement("img",{className:"img__uploading",onClick:function(){return i(!0)},src:"https://img.icons8.com/bubbles/2x/up.png"})))},O=a(98),N=a(41);function C(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var S=Object(b.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:"#CCF2E8",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var y=function(){var e=S(),t=Object(n.useState)(C),a=Object(l.a)(t,1)[0],o=Object(n.useState)(!1),r=Object(l.a)(o,2),s=r[0],i=r[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),f=m[0],b=m[1],v=Object(n.useState)([]),_=Object(l.a)(v,2),y=_[0],w=_[1],x=Object(n.useState)(""),k=Object(l.a)(x,2),I=k[0],U=k[1],A=Object(n.useState)(""),P=Object(l.a)(A,2),B=P[0],D=P[1],F=Object(n.useState)(""),L=Object(l.a)(F,2),R=L[0],T=L[1],W=Object(n.useState)(null),z=Object(l.a)(W,2),J=z[0],K=z[1];return Object(n.useEffect)((function(){var e=d.onAuthStateChanged((function(e){e?(console.log(e),K(e)):K(null)}));return function(){e()}}),[J,I]),Object(n.useEffect)((function(){p.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){w(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),c.a.createElement("div",{className:"App"},c.a.createElement(E.a,{open:s,onClose:function(){return i(!1)}},c.a.createElement("div",{style:a,className:e.paper},c.a.createElement("form",{className:"app__signUp"},c.a.createElement("center",null,c.a.createElement("h5",{className:"app__headerImage"},"Public Column")),c.a.createElement(O.a,{placeholder:"username",type:"text",value:I,onChange:function(e){return U(e.target.value)}}),c.a.createElement(O.a,{placeholder:"email",type:"text",value:B,onChange:function(e){return D(e.target.value)}}),c.a.createElement(O.a,{placeholder:"password",type:"password",value:R,onChange:function(e){return T(e.target.value)}}),c.a.createElement(h.a,{type:"submit",onClick:function(e){e.preventDefault(),d.createUserWithEmailAndPassword(B,R).then((function(e){return e.user.updateProfile({displayName:I})})).catch((function(e){return alert(e.message)})),i(!1)}},"Sign Up")))),c.a.createElement(E.a,{open:f,onClose:function(){return b(!1)}},c.a.createElement("div",{style:a,className:e.paper},c.a.createElement("form",{className:"app__signUp"},c.a.createElement("center",null,c.a.createElement("h5",{className:"app__headerImage"},"Public Column")),c.a.createElement(O.a,{placeholder:"email",type:"text",value:B,onChange:function(e){return D(e.target.value)}}),c.a.createElement(O.a,{placeholder:"password",type:"password",value:R,onChange:function(e){return T(e.target.value)}}),c.a.createElement(h.a,{type:"submit",onClick:function(e){e.preventDefault(),d.signInWithEmailAndPassword(B,R).catch((function(e){return alert(e.message)})),b(!1)}},"Sign In")))),c.a.createElement("div",{className:"app__header"},c.a.createElement("h1",{className:"app__headerImage"},"Public Column"),J?c.a.createElement(h.a,{onClick:function(){return d.signOut()}},"Logout"):c.a.createElement("div",{className:"app__loginContainer"},c.a.createElement(h.a,{onClick:function(){return i(!0)}},"Sign Up"),c.a.createElement(h.a,{onClick:function(){return b(!0)}},"Sign In"))),c.a.createElement("div",{className:"app__posts"},c.a.createElement("div",{className:"app__postsLeft"},y.map((function(e){var t=e.id,a=e.post;return c.a.createElement(g,{postId:t,user:J,username:a.username,caption:a.caption,imageUrl:a.imageUrl})}))),c.a.createElement("div",{className:"app__postsRight"},c.a.createElement(N.a,{url:"",maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSuccess:function(){},onAfterRender:function(){},onFailure:function(){}}))),c.a.createElement("div",{className:"app__info"},(null===J||void 0===J?void 0:J.displayName)?c.a.createElement(j,{username:J.displayName}):c.a.createElement("h3",null,"Please Login to upload here !!!")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.46979ba4.chunk.js.map